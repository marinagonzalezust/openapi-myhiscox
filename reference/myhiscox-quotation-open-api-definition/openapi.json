{
  "swagger": "2.0",
  "info": {
    "title": "Myhiscox Quotation Open API definition",
    "version": "1.0",
    "contact": {
      "name": "Hiscox"
    },
    "description": "Start policy creation API\n"
  },
  "host": "localhost:3000",
  "schemes": [
    "http"
  ],
  "produces": [
    "application/json"
  ],
  "consumes": [
    "application/json"
  ],
  "paths": {
    "/cover-data/{projectId}": {
      "get": {
        "summary": "Get cover-data based on risk data answers",
        "tags": [
          "cover-data"
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "object",
              "properties": {
                "projectId": {
                  "type": "integer"
                },
                "coverData": {
                  "$ref": "./models/coverdata.v1.json"
                }
              }
            }
          }
        },
        "security": [
          {
            "API Key - 1": []
          }
        ],
        "parameters": [
          {
            "type": "string",
            "in": "header",
            "name": "Accept Language"
          },
          {
            "type": "string",
            "in": "header",
            "name": "email",
            "description": "Broker email",
            "required": true
          },
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "./models/productvariant.v1.json"
              }
            }
          },
          {
            "type": "string",
            "in": "query"
          }
        ],
        "description": "Getting cover data based on risk data info",
        "operationId": 4.1
      },
      "parameters": [
        {
          "type": "integer",
          "name": "projectId",
          "in": "path",
          "required": true,
          "description": "retrieve cover data based on projectId"
        }
      ],
      "post": {
        "summary": "",
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "object",
              "properties": {
                "projectId": {
                  "type": "integer"
                },
                "status": {
                  "type": "string"
                }
              }
            }
          }
        },
        "description": "Store cover data",
        "security": [
          {
            "API Key - 1": []
          }
        ],
        "parameters": [
          {
            "type": "string",
            "in": "header",
            "name": "Accept Language"
          },
          {
            "type": "string",
            "in": "header",
            "name": "emal",
            "description": "broker email",
            "required": true
          },
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "properties": {
                "projectId": {
                  "type": "integer"
                },
                "coverData": {
                  "$ref": "./models/coverdata.v1.json"
                }
              }
            }
          }
        ],
        "tags": [
          "cover-data"
        ],
        "operationId": 4.2
      }
    },
    "/risk-data/{projectId}": {
      "get": {
        "summary": "Get risk-data based on product variants",
        "tags": [
          "risk-data"
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "object",
              "properties": {
                "projectId": {
                  "type": "integer"
                },
                "riskData": {
                  "$ref": "./models/riskdata.v1.json"
                }
              }
            }
          }
        },
        "description": "Retrieve disk-data based on list of product variantas, [also for existing project Id]",
        "security": [
          {
            "API Key - 1": []
          }
        ],
        "parameters": [
          {
            "type": "string",
            "in": "header",
            "name": "Accept Language"
          },
          {
            "type": "string",
            "in": "header",
            "name": "email",
            "required": true
          },
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "./models/productvariant.v1.json"
              }
            },
            "description": "Selected product variants list"
          },
          {
            "type": "array",
            "in": "query",
            "name": "product-variants"
          }
        ],
        "operationId": 3.1
      },
      "parameters": [
        {
          "type": "integer",
          "name": "projectId",
          "in": "path",
          "required": true,
          "description": "retrieve risk-data based on productId"
        }
      ],
      "post": {
        "summary": "",
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "object",
              "properties": {
                "projectId": {
                  "type": "integer"
                }
              }
            }
          }
        },
        "security": [
          {
            "API Key - 1": []
          }
        ],
        "parameters": [
          {
            "type": "string",
            "in": "header",
            "name": "Accept Language"
          },
          {
            "type": "string",
            "in": "header",
            "name": "email",
            "description": "Broker email",
            "required": true
          },
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "./models/riskdata.v1.json"
            },
            "description": ""
          }
        ],
        "description": "Store question answers for risk data",
        "tags": [
          "risk-data"
        ],
        "operationId": 3.2
      }
    },
    "v1.0/business-area/{areaId}": {
      "post": {
        "summary": "Business area to start new project quotation",
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "object",
              "properties": {
                "projectId": {
                  "type": "integer"
                }
              }
            },
            "examples": {
              "example-1": {}
            }
          },
          "401": {
            "description": "Unauthorized, invalid token or email",
            "schema": {
              "type": "object",
              "properties": {}
            }
          }
        },
        "description": "Start new quotation process with business area.\nPOST\n  1 Read JSON Request object Business Area type.\n  2 If BusinessArea exist \n    2.1 Create new Project\n    2.2 Assign businss area project\n    2.3 Return ProjectId created\n  3. Otherwise \n    3.1 Return error if not exist area\n    3.2 Return error by inserting project\n",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "./models/area.v1.json"
            },
            "description": "Area Object in request body. PSC or APC (future)"
          },
          {
            "type": "string",
            "in": "header",
            "name": "Accept-Language",
            "description": ""
          },
          {
            "type": "string",
            "in": "header",
            "name": "email",
            "description": "broker email",
            "required": true
          }
        ],
        "tags": [
          "quotation"
        ],
        "operationId": 1
      },
      "parameters": [
        {
          "type": "integer",
          "name": "areaId",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "summary": "",
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "./models/area.v1.json"
              }
            }
          }
        },
        "description": "Retieve business areas\nGET\n  1. If areaId not present return list of array for business areas DTO\n  2. If areaId present retrieve array of one item from existing business area",
        "security": [
          {
            "API Key - 1": []
          }
        ],
        "parameters": []
      }
    },
    "/policy-summary": {
      "get": {
        "summary": "Get policy summary information",
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "./models/policysummary.v1.json"
            }
          }
        },
        "security": [
          {
            "API Key - 1": []
          }
        ],
        "parameters": [
          {
            "type": "string",
            "in": "header",
            "name": "Accept language"
          },
          {
            "type": "string",
            "in": "header",
            "name": "email",
            "description": "broker email",
            "required": true
          },
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "properties": {
                "projectId": {
                  "type": "integer"
                }
              }
            }
          }
        ],
        "tags": [
          "policy-summary"
        ],
        "description": "Get Policy Summary Info",
        "operationId": 5.1
      },
      "post": {
        "summary": "",
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "object",
              "properties": {
                "projectId": {
                  "type": "integer"
                }
              }
            }
          }
        },
        "security": [
          {
            "API Key - 1": []
          }
        ],
        "parameters": [
          {
            "type": "string",
            "in": "header",
            "name": "Accept Language",
            "description": "API Language\n"
          },
          {
            "type": "string",
            "in": "header",
            "name": "email",
            "description": "broker email",
            "required": true
          },
          {
            "in": "body",
            "name": "body",
            "schema": {
              "$ref": "./models/policysummary.v1.json"
            }
          }
        ],
        "tags": [
          "policy-summary"
        ],
        "description": "Post Policy Summary Info",
        "operationId": 5.2
      }
    },
    "/customer-info": {
      "get": {
        "summary": "Get customer and policy holder info",
        "tags": [],
        "responses": {},
        "security": [
          {
            "API Key - 1": []
          }
        ],
        "parameters": [
          {
            "type": "string",
            "in": "header",
            "name": "Accept-Language"
          },
          {
            "type": "string",
            "in": "header",
            "name": "email",
            "description": "broker"
          }
        ]
      },
      "post": {
        "summary": "",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/budget-document": {
      "get": {
        "summary": "Get budget pdf",
        "tags": [],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "object",
              "properties": {
                "file": {
                  "type": [
                    "string",
                    "object"
                  ]
                }
              }
            }
          }
        },
        "description": "Getting budget PDF created in server ",
        "security": [
          {
            "API Key - 1": []
          }
        ],
        "parameters": [
          {
            "type": "string",
            "in": "header",
            "name": "Accept-Language"
          },
          {
            "type": "string",
            "in": "header",
            "name": "email",
            "description": ""
          }
        ]
      }
    },
    "/v1.0/sectors-activities/{projectId}": {
      "get": {
        "summary": "Get project sectos and activities",
        "tags": [],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "./models/sector.v1.json"
              }
            }
          }
        },
        "security": [
          {
            "API Key - 1": []
          }
        ],
        "parameters": [
          {
            "type": "string",
            "in": "header",
            "name": "Accept-Language",
            "description": ""
          },
          {
            "type": "string",
            "in": "header",
            "name": "email",
            "description": "broker email",
            "required": true
          }
        ],
        "description": "Get sectors and activities based on PSC projectId"
      },
      "parameters": [
        {
          "type": "integer",
          "name": "projectId",
          "in": "path",
          "required": true
        }
      ]
    },
    "/product-variants/project/{projectId}": {
      "get": {
        "summary": "Get project sectos and activities",
        "tags": [],
        "responses": {},
        "description": "Get produc variants based on APC projectId",
        "security": [
          {
            "API Key - 1": []
          }
        ],
        "parameters": [
          {
            "type": "string",
            "in": "header",
            "name": "Accept-Language"
          },
          {
            "type": "string",
            "in": "header",
            "name": "email",
            "description": "broker email"
          }
        ]
      },
      "parameters": [
        {
          "type": "integer",
          "name": "projectId",
          "in": "path",
          "required": true
        }
      ]
    },
    "/v1.0/product-variant/activity/{activityId}": {
      "get": {
        "summary": "Get product variants based on PSC project activity",
        "tags": [],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "./models/productvariant.v1.json"
              }
            }
          }
        },
        "description": "Get produc variants based on PSC project activity. Update activityId project.",
        "security": [
          {
            "API Key - 1": []
          }
        ],
        "parameters": [
          {
            "type": "string",
            "in": "header",
            "name": "Accept-Language"
          },
          {
            "type": "string",
            "in": "header",
            "name": "email",
            "description": "broker email"
          }
        ]
      },
      "parameters": [
        {
          "type": "integer",
          "name": "activityId",
          "in": "path",
          "required": true
        }
      ]
    }
  },
  "definitions": {},
  "securityDefinitions": {
    "API Key - 1": {
      "name": "API Key",
      "type": "apiKey",
      "in": "query",
      "description": "X-API-KEY"
    }
  }
}